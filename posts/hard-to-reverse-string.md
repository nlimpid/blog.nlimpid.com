---
title: å¦‚ä½•åè½¬å­—ç¬¦ä¸²
date: 2021-05-03 20:33
---
dfdf
## It is hard

### Byte

```jsx
func ReverseSimple(input string) string {
	length := len(input)
	output := make([]byte, length)
	for i := 0; i < length; i++ {
		output[i] = input[length-i-1]
	}
	return string(output)
}
```

æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹è‹±æ–‡å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ­£å¸¸åè½¬

```
'ABCD'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: DCBA
```

ä½†å½“æˆ‘ä»¬è¾“å…¥ä¸­æ–‡å­—ç¬¦æ—¶å€™ï¼Œå‡ºé”™äº†

```
'ä½ å¥½'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: ï¿½ï¿½å ½ï¿½
```

åŸå› æ˜¯ä¸åŒçš„ç¼–ç æ–¹å¼ä¸‹ä¸€ä¸ªç ä½å¯èƒ½åŒ…å«å¤šä¸ªå­—èŠ‚ï¼Œgo é»˜è®¤æ˜¯æŒ‰ utf8 ç¼–ç çš„ï¼Œä¸­æ–‡éœ€è¦ä¸‰å­—èŠ‚ï¼ŒæŒ‰å­—èŠ‚åè½¬ä¹‹åè‚¯å®šæ˜¯é”™ä¹±çš„ã€‚è¿™é‡Œè§£é‡Šä¸‹ä¸ºä»€ä¹ˆä¼šå‡ºç°[å ½]è¿™ä¸ªå­—çš„ utf8 ç¼–ç æ­£å¥½æ˜¯0xe5 0xa0 0xbdï¼Œæ‰€ä»¥èƒ½å¤Ÿæ˜¾ç¤ºã€‚

### Rune
```
func ReverseRune(input string) string {
	inputR := []rune(input)
	length := len(inputR)
	output := make([]rune, length)
	for i := 0; i < length; i++ {
		output[i] = inputR[length-i-1]
	}
	return string(output)
}
```
æˆ‘ä»¬è·‘ä¸€ä¸‹æµ‹è¯•
```
'ABCD'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: DCBA
'ä½ å¥½'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: å¥½ä½ 
'ğŸ™‚ğŸ™ƒ'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: ğŸ™ƒğŸ™‚
'ğŸ‡¬ğŸ‡§'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: ğŸ‡§ğŸ‡¬
```
å‰é¢çš„éƒ½æ­£å¸¸ï¼Œåˆ°è‹±å›½å›½æ——çš„æ—¶å€™å‡ºé—®é¢˜äº†ï¼Œè‹±å›½å›½æ——çš„ emoji åè½¬ä¹‹åå±…ç„¶æ˜¯ä¿åŠ åˆ©äºšå›½æ——ã€‚

BG	ğŸ‡§ğŸ‡¬ U+1F1E7 U+1F1EC	Bulgaria
GB	ğŸ‡¬ğŸ‡§U+1F1EC U+1F1E7	United Kingdom
å½“ç„¶æˆ‘ä»¬å¯¹æ¯”ä¸‹è¿™ä¸¤ä¸ªå›½æ——çš„ unicode ç ä½å°±ä¸€ç›®äº†ç„¶äº†ã€‚å›½æ——çš„ emoji å¤§å¤šç”±ä¸¤ä¸ªç ä½ç»„æˆï¼Œæ‰€ä»¥ç›´æ¥æŒ‰ç ä½åè½¬è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œé‚£æ€ä¹ˆåŠ

### Grapheme
è¿™é‡Œè¦å¼•å‡ºä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œ[å­—ä½ç°‡](https://unicode.org/reports/tr29/)ï¼Œgrapheme æ˜¯ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿ç»­ç ä½ç»„æˆçš„ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå•ä¸€çš„å›¾åƒå•å…ƒï¼Œåœ¨ä¹¦å†™ç³»ç»Ÿä¸Šè¡¨ç¤ºæœ€å°çš„åŠŸèƒ½å•å…ƒã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå›½æ——è™½ç„¶åŒ…å«å¤šä¸ªç ä½ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ª Graphemeï¼Œé‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†å¦‚ä½•æŒ‰å­—ä½ç°‡åè½¬å­—ç¬¦ä¸²ã€‚

ç”±äº Go è‡ªèº«æ²¡æœ‰ grapheme å®˜æ–¹åº“ï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“æ¥å®ç°
```
func ReverseGraph(input string) string {
	g := uniseg.NewGraphemes(input)
	output := make([]rune, 0)
	for g.Next() {
		output = append(g.Runes(), output...)
	}
	return string(output)
}
```
æµ‹è¯•ç»“æœå¦‚ä¸‹
```
'ä½ å¥½'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: å¥½ä½ 
'ğŸ™‚ğŸ™ƒ'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: ğŸ™ƒğŸ™‚
'ğŸ‡¬ğŸ‡§'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: ğŸ‡¬ğŸ‡§
```
## æ‰€è§éæ‰€å¾—
åˆ°äº† Grapheme è¿™ä¸€å±‚ï¼Œåè½¬çš„è¿‡ç¨‹å°±ç»“æŸäº†ï¼Œä½œä¸ºä¹¦å†™ç³»ç»Ÿçš„æœ€å°å•å…ƒï¼Œä½†æ˜¯å­—ç¬¦ä¸²ä½œä¸ºä¸€ä¸ªå›¾åƒç³»ç»Ÿï¼Œä¾æ—§å­˜åœ¨å¤§é‡çš„ä¾‹å¤–ã€‚

### Ligature
åˆå­—æ˜¯æŒ‡åœ¨è¥¿æ–¹å­—ä½“æ’å°å­¦ä¸­ä¸€èˆ¬è¡¨ç¤ºå°†å¤šäºä¸€ä¸ªå­—æ¯çš„åˆæˆä¸€ä¸ªå­—å½¢ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„ç¼–è¾‘å™¨ä¸­éƒ½æ”¯æŒåˆå­—çš„é€‰é¡¹ï¼Œå¼€å¯æ—¶!=ä¼šå˜æˆâ‰ ã€‚ä½†æ˜¯ï¼Œåˆå­—æ˜¯æœ‰è‡ªå·±çš„ç ä½çš„
fâ€Œf	ï¬€	U+FB00
fâ€Œfâ€Œi	ï¬ƒ	U+FB03
!=   â‰ â€ (U+2260)

é‡åˆ°åˆå­—çš„æ—¶å€™æˆ‘ä»¬æŒ‰ä»€ä¹ˆç»´åº¦å»åè½¬å‘¢? 

### Bidi explict markers
ç”±äºæŸä¸€äº›æ–‡å­—ï¼Œæ¯”å¦‚é˜¿æ‹‰ä¼¯æ–‡æ˜¯ä»å³å¾€å·¦ä¹¦å†™çš„ã€‚æ‰€ä»¥å½“åœ¨åŒä¸€æ®µè½æ··åˆä½¿ç”¨è¿™ä¸¤ç§æ–‡å­—ä¸”å…¶å„è‡ªä½¿ç”¨è‡ªå·±çš„ä¹¦å†™æ–¹å‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºçš„æŒ‡å®šä¸€äº›æ–‡å­—çš„æ˜¾ç¤ºæ–¹å‘ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ Right-to-left mark(unicode: U+202e)

è¿™ä¸ªç‰¹æ€§ç»™æˆ‘ä»¬åè½¬å­—ç¬¦ä¸²çš„å¸¦æ¥ä¸å°‘éº»çƒ¦ï¼Œæœ€ç›´æ¥çš„é—®é¢˜å°±æ˜¯å½“ä¸€ä¸ªæ–‡æ¡£ä¸­åŒ…å« RTL æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦è¦åè½¬ã€‚ä½¿ç”¨ä¹‹å‰çš„ ReverseRune å‡½æ•°ç›´æ¥å°è¯•å¯ä»¥çœ‹å‡ºåè½¬æ˜¯æœ‰é—®é¢˜çš„
![](./_image/2021-05-04/2021-05-04-11-01-14@2x.png)![](./_image/2021-05-04/2021-05-04-11-01-21@2x.png)


### Contextual character shaping
è¿˜æ˜¯é˜¿æ‹‰ä¼¯æ–‡ï¼Œé˜¿æ‹‰ä¼¯æ–‡è¿˜æœ‰ä¸ªç‰¹æ€§æ˜¯ contextual character shapingï¼Œç®€å•æ¥è¯´å°±æ˜¯å­—å½¢ä¼šéšç€ç ä½æ‰€åœ¨çš„ä½ç½®å‘ç”Ÿæ”¹å˜ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åè½¬ï¼Œå…¶å®æ ¹æœ¬å°±ä¸ä¸€æ ·äº†

```
'Ø±Ø§Ø¦Ø¹'çš„åè½¬å­—ç¬¦ä¸²æ˜¯: Ø¹Ø¦Ø§Ø±
```


